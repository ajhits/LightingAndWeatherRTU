import t,{createRef as o,Component as e}from"react";import{classNames as r,IconUtils as n,ObjectUtils as i}from"primereact/utils";import{tip as p}from"primereact/tooltip";import{Ripple as s}from"primereact/ripple";function l(){return l=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},l.apply(this,arguments)}function c(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function a(t,o){for(var e=0;e<o.length;e++){var r=o[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,o){return u=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},u(t,o)}function f(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&u(t,o)}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,o){if(o&&("object"===h(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return b(t)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function m(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function g(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?g(Object(e),!0).forEach((function(o){m(t,o,e[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))}))}return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var P=function(u){f(R,e);var h,b,g,P,w,j=(h=R,b=O(),function(){var t,o=y(h);if(b){var e=y(this).constructor;t=Reflect.construct(o,arguments,e)}else t=o.apply(this,arguments);return d(this,t)});function R(t){var e;return c(this,R),(e=j.call(this,t)).elementRef=o(e.props.forwardRef),e}return g=R,(P=[{key:"updateForwardRef",value:function(){var t=this.props.forwardRef;t&&("function"==typeof t?t(this.elementRef.current):t.current=this.elementRef.current)}},{key:"isDisabled",value:function(){return this.props.disabled||this.props.loading}},{key:"componentDidMount",value:function(){this.updateForwardRef(),this.props.tooltip&&this.renderTooltip()}},{key:"componentDidUpdate",value:function(t){t.tooltip===this.props.tooltip&&t.tooltipOptions===this.props.tooltipOptions||(this.tooltip?this.tooltip.update(v({content:this.props.tooltip},this.props.tooltipOptions||{})):this.renderTooltip())}},{key:"componentWillUnmount",value:function(){this.tooltip&&(this.tooltip.destroy(),this.tooltip=null)}},{key:"renderTooltip",value:function(){this.tooltip=p({target:this.elementRef.current,content:this.props.tooltip,options:this.props.tooltipOptions})}},{key:"renderIcon",value:function(){var t=this.props.loading?this.props.loadingIcon:this.props.icon,o=r("p-button-icon p-c",{"p-button-loading-icon":this.props.loading,"p-button-icon-left":"left"===this.props.iconPos&&this.props.label,"p-button-icon-right":"right"===this.props.iconPos&&this.props.label,"p-button-icon-top":"top"===this.props.iconPos&&this.props.label,"p-button-icon-bottom":"bottom"===this.props.iconPos&&this.props.label});return n.getJSXIcon(t,{className:o},{props:this.props})}},{key:"renderLabel",value:function(){return this.props.label?t.createElement("span",{className:"p-button-label p-c"},this.props.label):!this.props.children&&!this.props.label&&t.createElement("span",{className:"p-button-label p-c",dangerouslySetInnerHTML:{__html:"&nbsp;"}})}},{key:"renderBadge",value:function(){if(this.props.badge){var o=r("p-badge",this.props.badgeClassName);return t.createElement("span",{className:o},this.props.badge)}return null}},{key:"render",value:function(){var o=this.isDisabled(),e=r("p-button p-component",this.props.className,m({"p-button-icon-only":(this.props.icon||this.props.loading&&this.props.loadingIcon)&&!this.props.label,"p-button-vertical":("top"===this.props.iconPos||"bottom"===this.props.iconPos)&&this.props.label,"p-disabled":o,"p-button-loading":this.props.loading,"p-button-loading-label-only":this.props.loading&&!this.props.icon&&this.props.label},"p-button-loading-".concat(this.props.iconPos),this.props.loading&&this.props.loadingIcon&&this.props.label)),n=this.renderIcon(),p=this.renderLabel(),c=this.renderBadge(),a=i.findDiffKeys(this.props,R.defaultProps);return t.createElement("button",l({ref:this.elementRef},a,{className:e,disabled:o}),n,p,this.props.children,c,t.createElement(s,null))}}])&&a(g.prototype,P),w&&a(g,w),R}();m(P,"defaultProps",{label:null,icon:null,iconPos:"left",badge:null,badgeClassName:null,tooltip:null,tooltipOptions:null,forwardRef:null,disabled:!1,loading:!1,loadingIcon:"pi pi-spinner pi-spin"});var w=t.forwardRef((function(o,e){return t.createElement(P,l({forwardRef:e},o))}));export{w as Button,P as ButtonComponent};
